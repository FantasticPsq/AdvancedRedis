### Redis压缩列表 ####
1. 重点内容
```text
1. 压缩列表是一种为节约内存而开发的顺序型数据结构
2. 压缩列表被用作列表键和哈希键的底层实现之一。
3. 压缩列表可以包含多个节点，每个节点可以保存一个字节数组或者整数
4. 添加新节点到压缩列表，或者从压缩列表中删除节点，都有可能引发连锁更新操作，
但这种操作出现的几率并不高。
```

2. 压缩列表的构成
![](https://images2017.cnblogs.com/blog/960295/201801/960295-20180105111959721-165447256.png)
    1. zlbytes表示列表占用的字节
    2. zltail表示列表尾和列表首的字节差，通过这个偏移量，知道起始地址
    就可以直接求出表尾地址。
    3.zllen表示压缩列表有多少个节点
    
3. 压缩列表的节点
每个压缩列表节点可以保存一个字节数组或者一个整数值。压缩列表节点由
previous_entry_length,encoding,content三个部分组成。如图
![](https://images2017.cnblogs.com/blog/960295/201801/960295-20180105113126549-1381693656.png)
    1. previous_entry_length属性以字节为单位，记录了压缩列表前一个节点的长度。
    previous_entry_length属性的长度可以是1字节或者5字节：
        1. 如果前一个节点的长度小于254，那么previous_entry_length的长度为1字节：前一个节点的长度
        保存在这一个字节里面
        2. 如果前一个节点的长度大于等于254，那么previous_entry_length的长度就是5字节：其中属性的第一个字节
        将会被设置为0xFE（十进制254），而之后的四个节点则保存了前一个节点的长度
    2，encoding：节点的encoding属性记录了节点的content属性所保存的数据的类型以及长度：
        1. 1字节、2字节、5字节，值的最高位为00、01或者10的是字节数组编码：这种编码表示节点的content属性保存着
        字节数组，数组的长度由编码除去最高两位之后的其他位记录。
        2. 1字节长，值最高位以11开头的是整数编码：这种编码表示节点的content属性保存着整数值，整数值的类型和长度由
        编码除去最高两位之后的其他位记录
    3. content:节点的content用于保存节点的值，节点值可以是字节数组或者整数，值的类型和长度由encoding属性决定。
    
4. 连锁更新
插入新的节点和删除节点都有可能导致连锁更新，但因为连锁更新在最坏情况下对压缩列表执行N次空间重分配操作，而每次
空间重分配的最坏复杂度为O(N)，所以连锁更新的最坏复杂度为O(N^2)。
要注意的是，尽管连锁更新的复杂度挺高的，但他真正造成性能问题的几率是很低的，因为连锁更新发生的条件比较严苛，而且
一般情况连锁更新中被更新的节点都比较少，对性能问题造成的影响微乎其微。